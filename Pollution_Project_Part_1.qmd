---
title: "Pollution Project - DBH"
author: "Trevor Harrington"
format: html
editor: visual
execute: 
  keep-md: TRUE
  code-fold: TRUE
---

# SNHU Arboretum Stream Pollution Project

```{r echo=FALSE}
library(knitr)
library(ggplot2)
library(dplyr)
library(tidyr)
library(kableExtra)
library(scales)
```

### Writing and organizing the Data in R Studio

-   before analysis on DBH can be accomplished, both of the variables containing DBH will need to be converted into a data frame in R Studio.

    -   This could be done with code, but the excel file would need to be organized where each sheet contains a dataset, and is individually piped into R with excel plugin.

    -   Because this data set only contains 10 vectors, the easiest method will be manually entering DBH into R.

```{r}
# Generate variables for each set of vectors
dbh_near_water <- c(48.2, 32.3, 40.6, 21.0, 44.7)
dbh_distant_from_water <- c(54.5, 70.2, 29.0, 26.2, 46.7)

# Convert DBH from inches to centimeters
#dbh_near_water <- dbh_near_water * 2.54
#dbh_distant_from_water <- dbh_distant_from_water * 2.54

# Merge datasets and reshape for plotting
df_near_water <- data.frame(DBH = dbh_near_water, Location = "Near Water")
df_distant_from_water <- data.frame(DBH = dbh_distant_from_water, Location = "Distant from Water")

# Combine datasets
combined_df <- rbind(df_near_water, df_distant_from_water)

# Add a column for biomass
combined_df$"Biomass (kg/tree)" <- (41.173 * combined_df$DBH - 409.5)


# Add a column for Carbon (kg/tree)
combined_df$"Carbon (kg/tree)" <- combined_df$Biomass * 0.45

combined_df$"CO2_per_tree (kg/tree)" <- (combined_df$Carbon * 3.66666666667)
```

## Describing the dataset

These measurements were taken March 20th, 2023 at the SNHU Arboretum for part 1 of the stream pollution experiment that will be taking place for the remainder of this semester. The first step was to **gather diameter at breast height for two sets of trees in 15 x 15 foot plot**s**.** This data will be useful when considering additional details about the stream.

-   "near water" was measured between 1 and 5 yards around a seasonal second order stream. Trees were measured at breast height in a cluster of \~ 15 feet\^2.

-   This plot represents the bottom of a small slope separating the walking path of the arboretum and the highway \~ 1/4 mile away

-   both plots are only a short distance (100 ft at the furthest) from the walking path, likely a highly disturbed part of the forest.

```{r}
combined_df %>%
  
      mutate_if(is.numeric, comma) %>%

  kable(digits = 1) %>%
  kable_styling(bootstrap_options = "striped", "hover")
```

------------------------------------------------------------------------

### Comparing averages of the two plots

```{r}
combined_df %>%
  group_by(Location) %>%
summarise("Average Biomass (kg/tree)" = mean(`Biomass (kg/tree)`),
           "Average Carbon (kg/tree)" = mean(`Carbon (kg/tree)`),
           "Average CO2 (kg/tree)" = mean(`CO2_per_tree (kg/tree)`)
           )%>%
kable(digits = 1) %>%
  kable_styling(bootstrap_options = "striped", "hover")
```

```{r}
combined_df %>%
summarise("Combined Average Biomass (kg/tree)" = mean(`Biomass (kg/tree)`),
           "Combined Average Carbon (kg/tree)" = mean(`Carbon (kg/tree)`),
           "Combined Average CO2 (kg/tree)" = mean(`CO2_per_tree (kg/tree)`)
           )%>%
  
      mutate_if(is.numeric, comma) %>%

kable(digits = 1) %>%
  kable_styling(bootstrap_options = "striped", "hover")
```

```{r}
# Plot the data
ggplot(combined_df) +
  geom_point(aes(Location,DBH)) +
  geom_boxplot(aes(Location,DBH)) +
  labs(title = "DBH Comparison: Near Water vs Distant from Water",
       x = "Location",
       y = "Diameter at Breast Height (DBH, cm)") +
  theme_minimal()
```

### Observations:

Considering the graph, this does seem to support a statistically significant difference between the measurements taken near and far from the stream. Distant from the water, there seems to be a significant amount of deviation from the mean that could account for a much less significant difference between these two groups.

```{r}
t.test(dbh_distant_from_water,dbh_near_water)
```

### Observations:

Based on the t-test results for these two groups (t = 0.83622, df = 6.524, p-value = 0.4326), there is no significant difference between the mean DBH of trees near water ( mean = 37.36 cm) and distant from water ( mean = 45.32 cm) at the 95% confidence level. The confidence interval for the difference in means ranges from -14.89 to 30.81, which includes zero, further indicating that the true difference in means might be insignificant.

It is likely the small sample size has an impact of the results of this experiment and expanding the amount of trees observed in each group may provide a more clear deviation between the two groups. Another metric that would likely greatly improve accuracy is a height, which can be used to generate a more accurate estimation for biomass. Overall, this project is a relatively low-confidence example of a CO2 calculation, but accurately describes the process by which this is done.

------------------------------------------------------------------------

## Extrapolating these results Across the SNHU Arboretum

-   Considering the results of these two plots approximately 6.5m\^2 plot, each containing 10 trees with an average of 2132.8 kg CO2 per tree,

```{r}
  combined_df %>%
    
    summarise(
     "Total CO2 in Plot (kg/tree)" = 2132.8,
     "Plot Size (m^2)" = "6.5",
     "Tree Density (trees/m^2)" = "1.5",
     "Arboretum Area (m^2)" = 97124,
     "# in Arboretum Trees" = 97124.6 * 1.5,
     "CO2 in Arboretum (kg)" = 145686.9 * 2132.8
    ) %>%
    
    mutate_if(is.numeric, comma) %>%
    
    kable(digits = 1) %>%
  kable_styling(bootstrap_options = "striped", "hover")
```

------------------------------------------------------------------------

# Part 1 Final Report: 

## Introduction

The objective of this study was to choose two five by five meter plots in the SNHU arboretum as representatives of tree size close to a water source, versus further away. For this first part of this study, the measurements taken in these plots are used to determine biomass, which can be leveraged to calculate carbon and CO2 sequestration using a given conversion factor. For the second part of this study, tree density calculated in these two plots will be used to try and estimate the amount of trees present, and by extension the amount of CO2 sequestered by the SNHU Arboretum.

This study collected measurements of diameter at breast height (DBH) for five trees within each of the plots. Because trees grow at fairly consistent rates (depending on the species), DBH is an essential metric in both forestry and environmental research for understanding a number of factors about a forest. On top of those being calculated in this study, DBH can be important for understanding tree age and health, wildlife habitat assessments, and forest management / inventory surveys.

Biomass is the mass of living organisms in a given area, and provides a crucial measurement for understanding ecological health and carbon sequestration in a forest or ecosystem. In this study, biomass is study in situ and only provides a estimated value but prevents the need of harming the environment for this study.

## Materials and Methods

For this study, biomass is calculated using the allometric scaling equation $41.173 * DBH - 409.5$. The value for DBH in this equation, and the value recorded in the data is centimeters,

## Results
